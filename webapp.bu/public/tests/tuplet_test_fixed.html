<!DOCTYPE html>
<html>
<head>
    <title>Tuplet Test - Fixed</title>
    <script src="lib/vexflow5.js"></script>
</head>
<body>
    <h1>Tuplet Test - Verifying Fix</h1>
    <div id="output"></div>
    
    <script>
        console.log('VexFlow version:', VexFlow.VERSION || 'unknown');
        
        const { Renderer, Stave, Formatter, Voice, StaveNote, Tuplet, Beam } = VexFlow;
        
        // Create renderer and context
        const div = document.getElementById('output');
        const renderer = new Renderer(div, Renderer.Backends.SVG);
        renderer.resize(500, 200);
        const context = renderer.getContext();
        
        // Create stave
        const stave = new Stave(10, 40, 400);
        stave.addClef('treble');
        stave.setContext(context);
        stave.draw();
        
        // Create three eighth notes for a triplet
        const notes = [
            new StaveNote({ clef: 'treble', keys: ['c/4'], duration: '8' }),
            new StaveNote({ clef: 'treble', keys: ['c/4'], duration: '8' }),
            new StaveNote({ clef: 'treble', keys: ['c/4'], duration: '8' })
        ];
        
        // Test with correct camelCase property names
        try {
            console.log('Testing Tuplet with camelCase properties...');
            const tuplet = new Tuplet(notes, { notesOccupied: 2, numNotes: 3 });
            tuplet.setContext(context);
            
            // Create beam for the tuplet notes
            const beam = new Beam(notes);
            
            // Create voice and format
            const voice = new Voice({ num_beats: 1, beat_value: 4 });
            voice.addTickables(notes);
            
            new Formatter().joinVoices([voice]).format([voice], 350);
            voice.draw(context, stave);
            beam.draw();
            tuplet.draw();
            
            console.log('✓ Tuplet created and drawn successfully with camelCase properties!');
            
            // Add success message to page
            const msg = document.createElement('p');
            msg.style.color = 'green';
            msg.textContent = '✓ Tuplet rendered successfully!';
            document.body.appendChild(msg);
        } catch (e) {
            console.error('✗ Error with camelCase properties:', e);
            console.error('Stack:', e.stack);
            
            // Add error message to page
            const msg = document.createElement('p');
            msg.style.color = 'red';
            msg.textContent = '✗ Error: ' + e.message;
            document.body.appendChild(msg);
        }
    </script>
</body>
</html>
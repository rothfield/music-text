/* Music Text - Syntax Highlighting Styles */
/* Dedicated CSS for music-text parser visualization */

/* Bravura Music Font */
@font-face {
    font-family: 'Bravura';
    src: url('../assets/fonts/Bravura.woff2') format('woff2'),
         url('../assets/fonts/Bravura.woff') format('woff'),
         url('../assets/fonts/Bravura.otf') format('opentype');
    font-weight: normal;
    font-style: normal;
    font-display: swap;
}

/* XML Syntax Highlighting Classes */

/* Notes - Green */
.xml-note {
    color: #22863a;
    font-weight: bold;
}

.xml-note-content {
    color: #22863a;
    background: #f0fff4;
    padding: 1px 3px;
    border-radius: 2px;
}

/* Barlines - Purple */
.xml-barline {
    color: #6f42c1;
    font-weight: bold;
}

.xml-barline-content {
    color: #6f42c1;
    background: #f8f4ff;
    padding: 1px 3px;
    border-radius: 2px;
}

/* Dashes - Red */
.xml-dash {
    color: #d73a49;
    font-weight: bold;
}

.xml-dash-content {
    color: #d73a49;
    background: #fff5f5;
    padding: 1px 3px;
    border-radius: 2px;
}

/* Syllables/Lyrics - Orange/Yellow */
.xml-syllable {
    color: #e36209;
    font-weight: bold;
}

.xml-syllable-content {
    color: #e36209;
    background: #fff8f0;
    padding: 1px 3px;
    border-radius: 2px;
}

/* Whitespace - Blue */
.xml-whitespace {
    color: #0366d6;
    font-weight: bold;
}

.xml-whitespace-content {
    color: #0366d6;
    background: #f6f8ff;
    padding: 1px 3px;
    border-radius: 2px;
}

/* Rests - Gray */
.xml-rest {
    color: #586069;
    font-weight: bold;
}

.xml-rest-content {
    color: #586069;
    background: #fafbfc;
    padding: 1px 3px;
    border-radius: 2px;
}

/* Breath marks - Cyan */
.xml-breath {
    color: #0598bc;
    font-weight: bold;
}

.xml-breath-content {
    color: #0598bc;
    background: #f0fdff;
    padding: 1px 3px;
    border-radius: 2px;
}

/* Unknown elements - Warning Orange */
.xml-unknown {
    color: #f66a0a;
    font-weight: bold;
}

.xml-unknown-content {
    color: #f66a0a;
    background: #fff5f0;
    padding: 1px 3px;
    border-radius: 2px;
}

/* Structural elements (music, stave, lyrics) - Dark Blue */
.xml-structure {
    color: #032f62;
    font-weight: bold;
}

/* CodeMirror Syntax Highlighting Classes */
/* These classes are applied by CodeMirror's custom mode */


/* Whitespace tokens - Red background as requested */
.cm-music-whitespace {
    background-color: red !important;
    color: white !important;
}

/* Other token types can be styled here */
.cm-music-note {
    color: #22863a;
    font-weight: bold;
}




.cm-music-barline {
    color: #6f42c1;
    font-weight: bold;
}

.cm-music-dash {
    color: #d73a49;
    font-weight: bold;
}

.cm-music-syllable {
    color: #e36209;
    font-weight: bold;
}

.cm-music-rest {
    color: #586069;
    font-weight: bold;
}

.cm-music-breath {
    color: #0598bc;
    font-weight: bold;
}

.cm-music-unknown {
    color: #f66a0a;
    font-weight: bold;
    background-color: #ffe6cc;
}

/* Beat group indicators - make underscore characters transparent but still present */
.cm-music-beat_group {
    color: rgba(0, 0, 0, 0.2); /* 20% opacity - visible but faded */
    user-select: none;
}

/* Beat group role-specific styling for notes */
.cm-music-note-beat-group-start {
    position: relative;
    color: #22863a;
    font-weight: bold;
}

.cm-music-note-beat-group-start::after {
    content: "";
    position: absolute;
    bottom: -1.2em;
    left: 0;
    right: 0;
    border-bottom: 0.1em solid #0366d6;
    border-bottom-left-radius: 0.8em;
    border-left: 1px solid white;
    padding-bottom: 0.75em;
}

.cm-music-note-beat-group-middle {
    position: relative;
    color: #22863a;
    font-weight: bold;
}

.cm-music-note-beat-group-middle::after {
    content: "";
    position: absolute;
    bottom: -1.2em;
    left: 0;
    right: 0;
    border-bottom: 0.1em solid #0366d6;
    padding-bottom: 0.75em;
}

.cm-music-note-beat-group-end {
    position: relative;
    color: #22863a;
    font-weight: bold;
}

.cm-music-note-beat-group-end::after {
    content: "";
    position: absolute;
    bottom: -1.2em;
    left: 0;
    right: 0;
    border-bottom: 0.1em solid #0366d6;
    border-bottom-right-radius: 0.8em;
    border-right: 1px solid white;
    padding-bottom: 0.75em;
}

/* Slur indicators - make underscore characters visually disappear */
.cm-music-slur-indicator {
    color: transparent;
    user-select: none;
}

/* Slur notes - notes that are within slur spans */
.cm-music-note-slur {
    color: #2196F3;
    font-weight: 500;
}

/* Collision prevention for descenders (g, j, p, q, y) */
.cm-music-note.has-descender {
    padding-bottom: 0.3em;
}

/* Enhanced line height for notation lines to prevent collisions */
.cm-editor .cm-line {
    line-height: 2.5em;
}

/* Additional clearance for beat group arcs when descenders are present */
.cm-music-note.beat-group-start.has-descender::after {
    bottom: -0.8em;
}

/* Beat group notes - notes that are part of a beat group */
.cm-music-note.beat-group-start {
    position: relative;
}

/* Slur notes - notes that are part of a slur */
.cm-music-note.slur-start {
    position: relative;
}

/* Create spanning arc from start note across the entire beat group */
/* Based on DoReMiScript's span.beat.looped pattern */
.cm-music-note.beat-group-start::after {
    content: '';
    position: absolute;
    bottom: 1.05em;
    left: 0;
    border-bottom: 0.1em solid #0366d6;
    border-top: none;
    border-left: 1px solid white;
    border-right: 1px solid white;
    border-bottom-left-radius: 0.8em;
    border-bottom-right-radius: 0.8em;
    padding-bottom: 0.75em;
    width: 1em;
    z-index: 1;
    pointer-events: none;
}

/* Create spanning arc from start note across the entire slur (upper arc) */
/* Mirror of beat group pattern but for upper arcs */
.cm-music-note.slur-start::after {
    content: '';
    position: absolute;
    top: -0.2em;
    left: 0;
    border-top: 0.1em solid #d73a49;
    border-bottom: none;
    border-left: 1px solid white;
    border-right: 1px solid white;
    border-top-left-radius: 0.8em;
    border-top-right-radius: 0.8em;
    padding-top: 0.75em;
    z-index: 1;
    pointer-events: none;
}

/* Beat group width variants - Brute force 63 different classes */

/* 2-character beat groups */
.cm-music-beat-group-2-chars::after { width: 1.2em; }

/* 3-character beat groups */
.cm-music-beat-group-3-chars::after { width: 1.8em; }

/* 4-character beat groups */
.cm-music-beat-group-4-chars::after { width: 2.4em; }

/* 5-character beat groups */
.cm-music-beat-group-5-chars::after { width: 3.0em; }

/* 6-character beat groups */
.cm-music-beat-group-6-chars::after { width: 3.6em; }

/* 7-character beat groups */
.cm-music-beat-group-7-chars::after { width: 4.2em; }

/* 8-character beat groups */
.cm-music-beat-group-8-chars::after { width: 4.8em; }

/* 9-character beat groups */
.cm-music-beat-group-9-chars::after { width: 5.4em; }

/* 10-character beat groups */
.cm-music-beat-group-10-chars::after { width: 6.0em; }

/* Note in loop styling */
.cm-music-note-in-loop {
    color: #22863a;
    font-weight: bold;
}

/* Base styling for all dash loop classes */
.cm-music-dash-loop-2, .cm-music-dash-loop-3, .cm-music-dash-loop-4, .cm-music-dash-loop-5,
.cm-music-dash-loop-6, .cm-music-dash-loop-7, .cm-music-dash-loop-8, .cm-music-dash-loop-9, .cm-music-dash-loop-10,
.cm-music-dash-loop-11, .cm-music-dash-loop-12, .cm-music-dash-loop-13, .cm-music-dash-loop-14, .cm-music-dash-loop-15,
.cm-music-dash-loop-16, .cm-music-dash-loop-17, .cm-music-dash-loop-18, .cm-music-dash-loop-19, .cm-music-dash-loop-20,
.cm-music-dash-loop-21, .cm-music-dash-loop-22, .cm-music-dash-loop-23, .cm-music-dash-loop-24, .cm-music-dash-loop-25,
.cm-music-dash-loop-26, .cm-music-dash-loop-27, .cm-music-dash-loop-28, .cm-music-dash-loop-29, .cm-music-dash-loop-30,
.cm-music-dash-loop-31, .cm-music-dash-loop-32, .cm-music-dash-loop-33, .cm-music-dash-loop-34, .cm-music-dash-loop-35,
.cm-music-dash-loop-36, .cm-music-dash-loop-37, .cm-music-dash-loop-38, .cm-music-dash-loop-39, .cm-music-dash-loop-40,
.cm-music-dash-loop-41, .cm-music-dash-loop-42, .cm-music-dash-loop-43, .cm-music-dash-loop-44, .cm-music-dash-loop-45,
.cm-music-dash-loop-46, .cm-music-dash-loop-47, .cm-music-dash-loop-48, .cm-music-dash-loop-49, .cm-music-dash-loop-50,
.cm-music-dash-loop-51, .cm-music-dash-loop-52, .cm-music-dash-loop-53, .cm-music-dash-loop-54, .cm-music-dash-loop-55,
.cm-music-dash-loop-56, .cm-music-dash-loop-57, .cm-music-dash-loop-58, .cm-music-dash-loop-59, .cm-music-dash-loop-60,
.cm-music-dash-loop-61, .cm-music-dash-loop-62, .cm-music-dash-loop-63 {
    position: relative;
    color: #22863a;
    font-weight: bold;
}

/* Dash loop arc pseudo-elements */
.cm-music-dash-loop-2::after, .cm-music-dash-loop-3::after, .cm-music-dash-loop-4::after, .cm-music-dash-loop-5::after,
.cm-music-dash-loop-6::after, .cm-music-dash-loop-7::after, .cm-music-dash-loop-8::after, .cm-music-dash-loop-9::after, .cm-music-dash-loop-10::after,
.cm-music-dash-loop-11::after, .cm-music-dash-loop-12::after, .cm-music-dash-loop-13::after, .cm-music-dash-loop-14::after, .cm-music-dash-loop-15::after,
.cm-music-dash-loop-16::after, .cm-music-dash-loop-17::after, .cm-music-dash-loop-18::after, .cm-music-dash-loop-19::after, .cm-music-dash-loop-20::after,
.cm-music-dash-loop-21::after, .cm-music-dash-loop-22::after, .cm-music-dash-loop-23::after, .cm-music-dash-loop-24::after, .cm-music-dash-loop-25::after,
.cm-music-dash-loop-26::after, .cm-music-dash-loop-27::after, .cm-music-dash-loop-28::after, .cm-music-dash-loop-29::after, .cm-music-dash-loop-30::after,
.cm-music-dash-loop-31::after, .cm-music-dash-loop-32::after, .cm-music-dash-loop-33::after, .cm-music-dash-loop-34::after, .cm-music-dash-loop-35::after,
.cm-music-dash-loop-36::after, .cm-music-dash-loop-37::after, .cm-music-dash-loop-38::after, .cm-music-dash-loop-39::after, .cm-music-dash-loop-40::after,
.cm-music-dash-loop-41::after, .cm-music-dash-loop-42::after, .cm-music-dash-loop-43::after, .cm-music-dash-loop-44::after, .cm-music-dash-loop-45::after,
.cm-music-dash-loop-46::after, .cm-music-dash-loop-47::after, .cm-music-dash-loop-48::after, .cm-music-dash-loop-49::after, .cm-music-dash-loop-50::after,
.cm-music-dash-loop-51::after, .cm-music-dash-loop-52::after, .cm-music-dash-loop-53::after, .cm-music-dash-loop-54::after, .cm-music-dash-loop-55::after,
.cm-music-dash-loop-56::after, .cm-music-dash-loop-57::after, .cm-music-dash-loop-58::after, .cm-music-dash-loop-59::after, .cm-music-dash-loop-60::after,
.cm-music-dash-loop-61::after, .cm-music-dash-loop-62::after, .cm-music-dash-loop-63::after {
    content: '';
    position: absolute;
    top: 0.8em;
    left: 0;
    border-bottom: 0.1em solid #0366d6;
    border-top: none;
    border-left: 0.1em solid #0366d6;
    border-right: 0.1em solid #0366d6;
    border-bottom-left-radius: 0.5em;
    border-bottom-right-radius: 0.5em;
    height: 0.25em;
    z-index: 1;
    pointer-events: none;
}

/* Dash loop width classes - same as note loops */
.cm-music-dash-loop-2::after { width: 1.2em; }
.cm-music-dash-loop-3::after { width: 1.8em; }
.cm-music-dash-loop-4::after { width: 2.4em; }
.cm-music-dash-loop-5::after { width: 3.0em; }
.cm-music-dash-loop-6::after { width: 3.6em; }
.cm-music-dash-loop-7::after { width: 4.2em; }
.cm-music-dash-loop-8::after { width: 4.8em; }
.cm-music-dash-loop-9::after { width: 5.4em; }
.cm-music-dash-loop-10::after { width: 6.0em; }
.cm-music-dash-loop-11::after { width: 6.6em; }
.cm-music-dash-loop-12::after { width: 7.2em; }
.cm-music-dash-loop-13::after { width: 7.8em; }
.cm-music-dash-loop-14::after { width: 8.4em; }
.cm-music-dash-loop-15::after { width: 9.0em; }
.cm-music-dash-loop-16::after { width: 9.6em; }
.cm-music-dash-loop-17::after { width: 10.2em; }
.cm-music-dash-loop-18::after { width: 10.8em; }
.cm-music-dash-loop-19::after { width: 11.4em; }
.cm-music-dash-loop-20::after { width: 12.0em; }
.cm-music-dash-loop-21::after { width: 12.6em; }
.cm-music-dash-loop-22::after { width: 13.2em; }
.cm-music-dash-loop-23::after { width: 13.8em; }
.cm-music-dash-loop-24::after { width: 14.4em; }
.cm-music-dash-loop-25::after { width: 15.0em; }
.cm-music-dash-loop-26::after { width: 15.6em; }
.cm-music-dash-loop-27::after { width: 16.2em; }
.cm-music-dash-loop-28::after { width: 16.8em; }
.cm-music-dash-loop-29::after { width: 17.4em; }
.cm-music-dash-loop-30::after { width: 18.0em; }
.cm-music-dash-loop-31::after { width: 18.6em; }
.cm-music-dash-loop-32::after { width: 19.2em; }
.cm-music-dash-loop-33::after { width: 19.8em; }
.cm-music-dash-loop-34::after { width: 20.4em; }
.cm-music-dash-loop-35::after { width: 21.0em; }
.cm-music-dash-loop-36::after { width: 21.6em; }
.cm-music-dash-loop-37::after { width: 22.2em; }
.cm-music-dash-loop-38::after { width: 22.8em; }
.cm-music-dash-loop-39::after { width: 23.4em; }
.cm-music-dash-loop-40::after { width: 24.0em; }
.cm-music-dash-loop-41::after { width: 24.6em; }
.cm-music-dash-loop-42::after { width: 25.2em; }
.cm-music-dash-loop-43::after { width: 25.8em; }
.cm-music-dash-loop-44::after { width: 26.4em; }
.cm-music-dash-loop-45::after { width: 27.0em; }
.cm-music-dash-loop-46::after { width: 27.6em; }
.cm-music-dash-loop-47::after { width: 28.2em; }
.cm-music-dash-loop-48::after { width: 28.8em; }
.cm-music-dash-loop-49::after { width: 29.4em; }
.cm-music-dash-loop-50::after { width: 30.0em; }
.cm-music-dash-loop-51::after { width: 30.6em; }
.cm-music-dash-loop-52::after { width: 31.2em; }
.cm-music-dash-loop-53::after { width: 31.8em; }
.cm-music-dash-loop-54::after { width: 32.4em; }
.cm-music-dash-loop-55::after { width: 33.0em; }
.cm-music-dash-loop-56::after { width: 33.6em; }
.cm-music-dash-loop-57::after { width: 34.2em; }
.cm-music-dash-loop-58::after { width: 34.8em; }
.cm-music-dash-loop-59::after { width: 35.4em; }
.cm-music-dash-loop-60::after { width: 36.0em; }
.cm-music-dash-loop-61::after { width: 36.6em; }
.cm-music-dash-loop-62::after { width: 37.2em; }
.cm-music-dash-loop-63::after { width: 37.8em; }

/* Base styling for all note loop classes */
.cm-music-note-loop-1, .cm-music-note-loop-2, .cm-music-note-loop-3, .cm-music-note-loop-4, .cm-music-note-loop-5,
.cm-music-note-loop-6, .cm-music-note-loop-7, .cm-music-note-loop-8, .cm-music-note-loop-9, .cm-music-note-loop-10,
.cm-music-note-loop-11, .cm-music-note-loop-12, .cm-music-note-loop-13, .cm-music-note-loop-14, .cm-music-note-loop-15,
.cm-music-note-loop-16, .cm-music-note-loop-17, .cm-music-note-loop-18, .cm-music-note-loop-19, .cm-music-note-loop-20,
.cm-music-note-loop-21, .cm-music-note-loop-22, .cm-music-note-loop-23, .cm-music-note-loop-24, .cm-music-note-loop-25,
.cm-music-note-loop-26, .cm-music-note-loop-27, .cm-music-note-loop-28, .cm-music-note-loop-29, .cm-music-note-loop-30,
.cm-music-note-loop-31, .cm-music-note-loop-32, .cm-music-note-loop-33, .cm-music-note-loop-34, .cm-music-note-loop-35,
.cm-music-note-loop-36, .cm-music-note-loop-37, .cm-music-note-loop-38, .cm-music-note-loop-39, .cm-music-note-loop-40,
.cm-music-note-loop-41, .cm-music-note-loop-42, .cm-music-note-loop-43, .cm-music-note-loop-44, .cm-music-note-loop-45,
.cm-music-note-loop-46, .cm-music-note-loop-47, .cm-music-note-loop-48, .cm-music-note-loop-49, .cm-music-note-loop-50,
.cm-music-note-loop-51, .cm-music-note-loop-52, .cm-music-note-loop-53, .cm-music-note-loop-54, .cm-music-note-loop-55,
.cm-music-note-loop-56, .cm-music-note-loop-57, .cm-music-note-loop-58, .cm-music-note-loop-59, .cm-music-note-loop-60,
.cm-music-note-loop-61, .cm-music-note-loop-62, .cm-music-note-loop-63 {
    position: relative;
    color: #22863a;
    font-weight: bold;
}

.cm-music-note-loop-1::after, .cm-music-note-loop-2::after, .cm-music-note-loop-3::after, .cm-music-note-loop-4::after, .cm-music-note-loop-5::after,
.cm-music-note-loop-6::after, .cm-music-note-loop-7::after, .cm-music-note-loop-8::after, .cm-music-note-loop-9::after, .cm-music-note-loop-10::after,
.cm-music-note-loop-11::after, .cm-music-note-loop-12::after, .cm-music-note-loop-13::after, .cm-music-note-loop-14::after, .cm-music-note-loop-15::after,
.cm-music-note-loop-16::after, .cm-music-note-loop-17::after, .cm-music-note-loop-18::after, .cm-music-note-loop-19::after, .cm-music-note-loop-20::after,
.cm-music-note-loop-21::after, .cm-music-note-loop-22::after, .cm-music-note-loop-23::after, .cm-music-note-loop-24::after, .cm-music-note-loop-25::after,
.cm-music-note-loop-26::after, .cm-music-note-loop-27::after, .cm-music-note-loop-28::after, .cm-music-note-loop-29::after, .cm-music-note-loop-30::after,
.cm-music-note-loop-31::after, .cm-music-note-loop-32::after, .cm-music-note-loop-33::after, .cm-music-note-loop-34::after, .cm-music-note-loop-35::after,
.cm-music-note-loop-36::after, .cm-music-note-loop-37::after, .cm-music-note-loop-38::after, .cm-music-note-loop-39::after, .cm-music-note-loop-40::after,
.cm-music-note-loop-41::after, .cm-music-note-loop-42::after, .cm-music-note-loop-43::after, .cm-music-note-loop-44::after, .cm-music-note-loop-45::after,
.cm-music-note-loop-46::after, .cm-music-note-loop-47::after, .cm-music-note-loop-48::after, .cm-music-note-loop-49::after, .cm-music-note-loop-50::after,
.cm-music-note-loop-51::after, .cm-music-note-loop-52::after, .cm-music-note-loop-53::after, .cm-music-note-loop-54::after, .cm-music-note-loop-55::after,
.cm-music-note-loop-56::after, .cm-music-note-loop-57::after, .cm-music-note-loop-58::after, .cm-music-note-loop-59::after, .cm-music-note-loop-60::after,
.cm-music-note-loop-61::after, .cm-music-note-loop-62::after, .cm-music-note-loop-63::after {
    content: '';
    position: absolute;
    top: 0.8em;
    left: 0;
    border-bottom: 0.1em solid #0366d6;
    border-top: none;
    border-left: 0.1em solid #0366d6;
    border-right: 0.1em solid #0366d6;
    border-bottom-left-radius: 0.5em;
    border-bottom-right-radius: 0.5em;
    height: 0.25em;
    z-index: 1;
    pointer-events: none;
}

/* Note loop classes 1-63 for comprehensive coverage */
.cm-music-note-loop-1::after { width: 0.6em; }
.cm-music-note-loop-2::after { width: 1.2em; }
.cm-music-note-loop-3::after { width: 1.8em; }
.cm-music-note-loop-4::after { width: 2.4em; }
.cm-music-note-loop-5::after { width: 3.0em; }
.cm-music-note-loop-6::after { width: 3.6em; }
.cm-music-note-loop-7::after { width: 4.2em; }
.cm-music-note-loop-8::after { width: 4.8em; }
.cm-music-note-loop-9::after { width: 5.4em; }
.cm-music-note-loop-10::after { width: 6.0em; }
.cm-music-note-loop-11::after { width: 6.6em; }
.cm-music-note-loop-12::after { width: 7.2em; }
.cm-music-note-loop-13::after { width: 7.8em; }
.cm-music-note-loop-14::after { width: 8.4em; }
.cm-music-note-loop-15::after { width: 9.0em; }
.cm-music-note-loop-16::after { width: 9.6em; }
.cm-music-note-loop-17::after { width: 10.2em; }
.cm-music-note-loop-18::after { width: 10.8em; }
.cm-music-note-loop-19::after { width: 11.4em; }
.cm-music-note-loop-20::after { width: 12.0em; }
.cm-music-note-loop-21::after { width: 12.6em; }
.cm-music-note-loop-22::after { width: 13.2em; }
.cm-music-note-loop-23::after { width: 13.8em; }
.cm-music-note-loop-24::after { width: 14.4em; }
.cm-music-note-loop-25::after { width: 15.0em; }
.cm-music-note-loop-26::after { width: 15.6em; }
.cm-music-note-loop-27::after { width: 16.2em; }
.cm-music-note-loop-28::after { width: 16.8em; }
.cm-music-note-loop-29::after { width: 17.4em; }
.cm-music-note-loop-30::after { width: 18.0em; }
.cm-music-note-loop-31::after { width: 18.6em; }
.cm-music-note-loop-32::after { width: 19.2em; }
.cm-music-note-loop-33::after { width: 19.8em; }
.cm-music-note-loop-34::after { width: 20.4em; }
.cm-music-note-loop-35::after { width: 21.0em; }
.cm-music-note-loop-36::after { width: 21.6em; }
.cm-music-note-loop-37::after { width: 22.2em; }
.cm-music-note-loop-38::after { width: 22.8em; }
.cm-music-note-loop-39::after { width: 23.4em; }
.cm-music-note-loop-40::after { width: 24.0em; }
.cm-music-note-loop-41::after { width: 24.6em; }
.cm-music-note-loop-42::after { width: 25.2em; }
.cm-music-note-loop-43::after { width: 25.8em; }
.cm-music-note-loop-44::after { width: 26.4em; }
.cm-music-note-loop-45::after { width: 27.0em; }
.cm-music-note-loop-46::after { width: 27.6em; }
.cm-music-note-loop-47::after { width: 28.2em; }
.cm-music-note-loop-48::after { width: 28.8em; }
.cm-music-note-loop-49::after { width: 29.4em; }
.cm-music-note-loop-50::after { width: 30.0em; }
.cm-music-note-loop-51::after { width: 30.6em; }
.cm-music-note-loop-52::after { width: 31.2em; }
.cm-music-note-loop-53::after { width: 31.8em; }
.cm-music-note-loop-54::after { width: 32.4em; }
.cm-music-note-loop-55::after { width: 33.0em; }
.cm-music-note-loop-56::after { width: 33.6em; }
.cm-music-note-loop-57::after { width: 34.2em; }
.cm-music-note-loop-58::after { width: 34.8em; }
.cm-music-note-loop-59::after { width: 35.4em; }
.cm-music-note-loop-60::after { width: 36.0em; }
.cm-music-note-loop-61::after { width: 36.6em; }
.cm-music-note-loop-62::after { width: 37.2em; }
.cm-music-note-loop-63::after { width: 37.8em; }

/* Slur width variants - mirroring beat group patterns */
/* 2-note slur */
.cm-music-note.slur-start.slur-2::after {
    width: 1.5em;
}

/* 3-note slur */
.cm-music-note.slur-start.slur-3::after {
    width: 2.5em;
}

/* 4-note slur */
.cm-music-note.slur-start.slur-4::after {
    width: 3.5em;
}

/* 5-note slur */
.cm-music-note.slur-start.slur-5::after {
    width: 4.5em;
}

/* 6+ note slur */
.cm-music-note.slur-start.slur-6::after {
    width: 5.5em;
}

/* Beat group highlighting - TEMPORARILY DISABLED */
/* Highlight notes in beat groups with subtle background */
/*.cm-music-note.in-beat-group {
    background-color: rgba(3, 102, 214, 0.1);
    border-radius: 3px;
    padding: 1px 2px;
}*/

/* Start note gets slightly stronger highlight */
/*.cm-music-note.beat-group-start {
    background-color: rgba(3, 102, 214, 0.15);
    border-radius: 3px;
    padding: 1px 2px;
}*/

/* End note styling */
/*.cm-music-note.beat-group-end {
    background-color: rgba(3, 102, 214, 0.12);
    border-radius: 3px;
    padding: 1px 2px;
}*/

/* Implicit beat group highlighting - for spatially-delimited beats */
/* Highlight notes in implicit beat groups with subtle background */
.cm-music-note.in-implicit-beat {
    background-color: rgba(255, 152, 0, 0.1);
    border-radius: 3px;
    padding: 1px 2px;
}

/* Start note gets slightly stronger highlight */
.cm-music-note.implicit-beat-start {
    position: relative;
    background-color: rgba(255, 152, 0, 0.15);
    border-radius: 3px;
    padding: 1px 2px;
}

/* End note styling */
.cm-music-note.implicit-beat-end {
    background-color: rgba(255, 152, 0, 0.12);
    border-radius: 3px;
    padding: 1px 2px;
}

/* Create spanning arc for implicit beats (same as beat groups but orange) */
.cm-music-note.implicit-beat-start::after {
    content: '';
    position: absolute;
    bottom: 1.05em;
    left: 0;
    border-bottom: 0.1em solid #ff9800;
    border-top: none;
    border-left: 1px solid white;
    border-right: 1px solid white;
    border-bottom-left-radius: 0.8em;
    border-bottom-right-radius: 0.8em;
    padding-bottom: 0.75em;
    width: 1em;
    z-index: 1;
    pointer-events: none;
}

/* Implicit beat width variants */
.cm-music-implicit-beat-2-chars::after { width: 1.2em; }
.cm-music-implicit-beat-3-chars::after { width: 1.8em; }
.cm-music-implicit-beat-4-chars::after { width: 2.4em; }
.cm-music-implicit-beat-5-chars::after { width: 3.0em; }
.cm-music-implicit-beat-6-chars::after { width: 3.6em; }
.cm-music-implicit-beat-7-chars::after { width: 4.2em; }
.cm-music-implicit-beat-8-chars::after { width: 4.8em; }
.cm-music-implicit-beat-9-chars::after { width: 5.4em; }
.cm-music-implicit-beat-10-chars::after { width: 6.0em; }

/* Highlight notes in slurs with subtle background */
.cm-music-note.in-slur {
    background-color: rgba(215, 58, 73, 0.1);
    border-radius: 3px;
    padding: 1px 2px;
}

/* Start note gets slightly stronger highlight */
.cm-music-note.slur-start {
    background-color: rgba(215, 58, 73, 0.15);
    border-radius: 3px;
    padding: 1px 2px;
}

/* End note styling */
.cm-music-note.slur-end {
    background-color: rgba(215, 58, 73, 0.12);
    border-radius: 3px;
    padding: 1px 2px;
}

/* Mordent styling - based on DoReMiScript patterns */
.cm-music-mordent {
    position: absolute;
    font-size: 1.5em;
    top: 0.4em;
    left: 0.13em;
    z-index: 2;
    font-family: "Times New Roman", Georgia, serif;
    font-weight: normal;
    color: #6f42c1; /* Purple like ornaments */
}

/* Enhanced mordent with symbol styling */
.cm-music-mordent::before {
    content: "∿"; /* Unicode wavy line for mordent */
    display: inline-block;
    transform: scaleX(1.2);
}

/* Alternative mordent symbols */
.cm-music-mordent.short::before {
    content: "~";
}

.cm-music-mordent.inverted::before {
    content: "⌐";
}

/* Music Symbols using Bravura Font */
.music-symbol {
    font-family: 'Bravura', serif;
    font-size: 1.2em;
}

/* Ornament symbols using Bravura */
.music-ornament {
    font-family: 'Bravura', serif;
    font-size: 1.4em;
    color: #6f42c1; /* Purple like other ornaments */
    position: relative;
    top: -0.1em;
}

/* Trill symbol - Unicode U+E566 in Bravura */
.music-trill::before {
    content: "\E566"; /* Bravura trill symbol */
    font-family: 'Bravura', serif;
}

/* Mordent symbol - Unicode U+E56C in Bravura */
.music-mordent::before {
    content: "\E56C"; /* Bravura mordent symbol */
    font-family: 'Bravura', serif;
}

/* Update mordent to use Bravura font */
.cm-music-mordent {
    position: absolute;
    font-size: 1.5em;
    top: 0.4em;
    left: 0.13em;
    z-index: 2;
    font-family: 'Bravura', serif;
    font-weight: normal;
    color: #6f42c1;
}

/* Enhanced mordent with Bravura symbol */
.cm-music-mordent::before {
    content: "\E56C"; /* Bravura mordent symbol */
    display: inline-block;
}

/* Visual slur CSS classes for toggle functionality */
.slur-start {
    position: relative;
    background-color: rgba(215, 58, 73, 0.1);
    border-radius: 2px;
}

.slur-start::before {
    content: '';
    position: absolute;
    top: -0.4em;
    left: 0;
    border-top: 2px solid #d73a49;
    border-left: 2px solid #d73a49;
    border-top-left-radius: 0.6em;
    width: 0.4em;
    height: 0.4em;
    z-index: 3;
    pointer-events: none;
}

.slur-end {
    position: relative;
    background-color: rgba(215, 58, 73, 0.1);
    border-radius: 2px;
}

.slur-end::after {
    content: '';
    position: absolute;
    top: -0.4em;
    right: 0;
    border-top: 2px solid #d73a49;
    border-right: 2px solid #d73a49;
    border-top-right-radius: 0.6em;
    width: 0.4em;
    height: 0.4em;
    z-index: 3;
    pointer-events: none;
}

/* Future music-text specific styles can go here */
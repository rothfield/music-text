<!DOCTYPE html>
<html>
<head>
    <title>VexFlow API Test</title>
    <script src="lib/vexflow5.js"></script>
</head>
<body>
    <h1>VexFlow API Test</h1>
    <div id="output"></div>
    
    <script>
        console.log('=== VexFlow API Exploration ===');
        console.log('VexFlow object:', VexFlow);
        
        // Check available objects
        Object.keys(VexFlow).forEach(key => {
            if (key.toLowerCase().includes('bar')) {
                console.log(`VexFlow.${key}:`, VexFlow[key]);
                if (VexFlow[key] && typeof VexFlow[key] === 'object') {
                    console.log(`  Properties:`, Object.keys(VexFlow[key]));
                    if (VexFlow[key].type) {
                        console.log(`  .type:`, VexFlow[key].type);
                    }
                }
            }
        });
        
        const { Renderer, Stave } = VexFlow;
        
        // Create renderer
        const div = document.getElementById("output");
        const renderer = new Renderer(div, Renderer.Backends.SVG);
        renderer.resize(800, 200);
        const context = renderer.getContext();
        
        // Create stave
        const stave = new Stave(10, 40, 700);
        
        console.log('=== Testing Stave Methods ===');
        console.log('setBegBarType method:', typeof stave.setBegBarType);
        console.log('setEndBarType method:', typeof stave.setEndBarType);
        
        // Test different barline strings
        const barlineStrings = [
            'REPEAT_BEGIN', 'REPEAT_END', 'REPEAT_BOTH',
            'repeat-begin', 'repeat-end', 'repeat-both',
            'SINGLE', 'DOUBLE', 'END',
            'single', 'double', 'end'
        ];
        
        console.log('=== Testing End Barline Strings ===');
        for (const str of barlineStrings) {
            try {
                const testStave = new Stave(10, 40, 700);
                testStave.setEndBarType(str);
                console.log(`SUCCESS: "${str}" works for setEndBarType`);
            } catch (e) {
                console.log(`FAILED: "${str}" - ${e.message}`);
            }
        }
        
        // Try to set a working barline
        try {
            stave.setEndBarType('REPEAT_END');
            console.log('Set REPEAT_END successfully');
        } catch (e) {
            console.error('REPEAT_END failed:', e);
        }
        
        stave.setContext(context).draw();
    </script>
</body>
</html>
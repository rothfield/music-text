<!DOCTYPE html>
<html>
<head>
    <title>Simple Barline Test</title>
    <script src="lib/vexflow5.js"></script>
</head>
<body>
    <h1>Simple Barline Test</h1>
    <p>Testing repeat end barline specifically</p>
    <div id="output"></div>
    
    <script>
        const { Renderer, Stave, Voice, Formatter, StaveNote, BarlineType } = VexFlow;
        
        // Create renderer
        const div = document.getElementById("output");
        const renderer = new Renderer(div, Renderer.Backends.SVG);
        renderer.resize(800, 150);
        const context = renderer.getContext();
        
        // Create stave with explicit repeat end barline
        const stave = new Stave(10, 40, 700);
        stave.addClef('treble');
        
        console.log('Available BarlineType constants:', BarlineType);
        console.log('REPEAT_END value:', BarlineType.REPEAT_END);
        
        // Set repeat end barline
        console.log('Setting repeat end barline...');
        stave.setEndBarType(BarlineType.REPEAT_END);
        console.log('Repeat end barline set successfully');
        
        // Check what was actually set
        const modifiers = stave.getModifiers();
        console.log('Stave modifiers:', modifiers);
        if (modifiers.length > 1) {
            const endBarline = modifiers[1];
            console.log('End barline modifier:', endBarline);
            if (endBarline.getType) {
                console.log('End barline type:', endBarline.getType());
            }
        }
        
        // Draw the stave
        stave.setContext(context).draw();
        
        // Create some notes to go with it
        const notes = [
            new StaveNote({ keys: ["c/4"], duration: "q" }),
            new StaveNote({ keys: ["d/4"], duration: "q" }),
            new StaveNote({ keys: ["e/4"], duration: "q" }),
            new StaveNote({ keys: ["f/4"], duration: "q" }),
        ];
        
        // Create voice and format
        const voice = new Voice({ num_beats: 4, beat_value: 4 });
        voice.addTickables(notes);
        new Formatter().joinVoices([voice]).format([voice], 650);
        voice.draw(context, stave);
        
        console.log('Test completed - check if repeat end barline is visible');
    </script>
</body>
</html>
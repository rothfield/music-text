<!DOCTYPE html>
<html>
<head>
    <title>Tuplet Display Test</title>
    <link rel="stylesheet" href="webapp/public/css/music-text.css">
    <style>
        body {
            font-family: monospace;
            font-size: 16px;
            padding: 20px;
            background: #f5f5f5;
        }
        .test-section {
            background: white;
            padding: 20px;
            margin: 10px 0;
            border-radius: 5px;
            border: 1px solid #ddd;
        }
        .test-title {
            font-weight: bold;
            margin-bottom: 10px;
            color: #333;
        }
        .editor-simulation {
            border: 1px solid #ccc;
            padding: 20px;
            background: white;
            font-family: monospace;
            min-height: 80px;
            position: relative;
        }
    </style>
</head>
<body>
    <h1>Tuplet Display Test</h1>

    <div class="test-section">
        <div class="test-title">Triplet (3:2) - should show italic "3" centered above, orange arc below:</div>
        <div class="editor-simulation">
            <span class="cm-music-note beat-loop-3 tuplet-3-2">1</span><span class="cm-music-note tuplet-3-2">2</span><span class="cm-music-note tuplet-3-2">3</span>
        </div>
    </div>

    <div class="test-section">
        <div class="test-title">Quintuplet (5:4) - should show italic "5" centered above:</div>
        <div class="editor-simulation">
            <span class="cm-music-note beat-loop-5 tuplet-5-4">1</span><span class="cm-music-note tuplet-5-4">2</span><span class="cm-music-note tuplet-5-4">3</span><span class="cm-music-note tuplet-5-4">4</span><span class="cm-music-note tuplet-5-4">5</span>
        </div>
    </div>

    <div class="test-section">
        <div class="test-title">Sextuplet (6:4) - should show italic "6" centered above:</div>
        <div class="editor-simulation">
            <span class="cm-music-note beat-loop-6 tuplet-6-4">1</span><span class="cm-music-note tuplet-6-4">2</span><span class="cm-music-note tuplet-6-4">3</span><span class="cm-music-note tuplet-6-4">4</span><span class="cm-music-note tuplet-6-4">5</span><span class="cm-music-note tuplet-6-4">6</span>
        </div>
    </div>

    <div class="test-section">
        <div class="test-title">Regular 4-beat (no tuplet) - should show only orange arc:</div>
        <div class="editor-simulation">
            <span class="cm-music-note beat-loop-4">1</span><span class="cm-music-note">2</span><span class="cm-music-note">3</span><span class="cm-music-note">4</span>
        </div>
    </div>

    <div class="test-section">
        <div class="test-title">CLI Output Simulation for |123|:</div>
        <div id="cli-triplet" class="editor-simulation">123</div>
        <button onclick="simulateTriplet()">Apply CLI Triplet Data</button>
    </div>

    <script>
        function simulateTriplet() {
            // Simulate the exact CLI output for |123|
            const characterStyles = [
                {
                    "pos": 0,
                    "length": 1,
                    "classes": ["cm-music-note", "beat-loop-3", "tuplet-3-2"]
                },
                {
                    "pos": 1,
                    "length": 1,
                    "classes": ["cm-music-note", "tuplet-3-2"]
                },
                {
                    "pos": 2,
                    "length": 1,
                    "classes": ["cm-music-note", "tuplet-3-2"]
                }
            ];

            const editor = document.getElementById('cli-triplet');
            const text = '123';
            editor.innerHTML = '';

            characterStyles.forEach(style => {
                const span = document.createElement('span');
                span.textContent = text.charAt(style.pos);
                span.className = style.classes.join(' ');
                editor.appendChild(span);
            });

            console.log('Applied triplet styles:', characterStyles);
        }
    </script>
</body>
</html>